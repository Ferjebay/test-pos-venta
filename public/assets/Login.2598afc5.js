import{_ as b,d as _,r as m,u as y,a as h,P as v,o as w,c as V,e as l,w as S,f as a,g as d,Q as p,h as I,i as c}from"./index.9c5c742c.js";import{u as k}from"./auth-user.39da1b8c.js";import{u as $,A as f}from"./Api.dae86ed2.js";import{_ as q}from"./logo.80fb852d.js";import"./index.2cf0d985.js";const B=_({name:"Login",setup(){const e=m(!1);$();const o=m({email:"",password:""}),t=y();return{form:o,loading:e,onSubmit:async()=>{try{e.value=!0;const{data:{token:r}}=await f.post("/auth/login",o.value),n=k();n.setToken(r);const{claim:{user:i}}=h.read(r),{data:s}=await f.get(`/roles/getPermisos/${i.rol_id}`);let u=[];s.permisos.forEach(g=>u.push(g.nombre)),n.setPermisos(u),v.hide(),t.push("/"),e.value=!1}catch(r){e.value=!1,console.log(r)}},router:t}}}),P={class:"area-login"},Q=l("h1",{class:"title"},"Iniciar Sesion",-1),U={class:"login"},A=l("div",{class:"element-form"},[l("img",{src:q})],-1);function L(e,o,t,r,n,i){return w(),V("section",P,[Q,l("div",U,[A,l("form",{onSubmit:o[2]||(o[2]=S((...s)=>e.onSubmit&&e.onSubmit(...s),["prevent"])),class:"element-form"},[a(p,{"label-color":"blue-grey-3",class:"q-mb-lg","bg-color":"blue-grey-10",filled:"",label:"Ingresa tu email",modelValue:e.form.email,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.email=s),modelModifiers:{trim:!0},required:""},{prepend:d(()=>[a(c,{name:"person",color:"blue-grey-3"})]),_:1},8,["modelValue"]),a(p,{type:"password","label-color":"blue-grey-3",filled:"","bg-color":"blue-grey-10",label:"Ingresa tu contrase\xF1a",modelValue:e.form.password,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.password=s),modelModifiers:{trim:!0},required:""},{prepend:d(()=>[a(c,{name:"key",color:"blue-grey-3"})]),_:1},8,["modelValue"]),a(I,{label:"Ingresar",class:"q-px-xl",loading:e.loading,type:"submit",color:"deep-purple-6"},null,8,["loading"])],32)])])}var R=b(B,[["render",L]]);export{R as default};
