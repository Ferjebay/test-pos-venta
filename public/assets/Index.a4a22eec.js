import{d as S,r as u,C as I,_ as N,o as m,a9 as C,g as s,f as a,ap as A,e as t,Q as _,h as g,ar as P,ad as Q,c as D,aa as w,au as E,af as z,bj as L,ao as j,i as k,ab as B,ac as R}from"./index.0d16ed78.js";import{Q as T}from"./QSpace.81aae9a6.js";import{Q as M,a as F,b as q}from"./QTable.515a4d9f.js";import{Q as U}from"./QBadge.cb33406e.js";import{Q as O}from"./QPage.30b92492.js";import{u as H,Q as G}from"./useRolPermisos.8999f7bd.js";import{a as J,A as V,u as K}from"./Api.96c094f1.js";import{A as W}from"./Add.c648ccfa.js";import{Q as X}from"./QForm.fb098f11.js";import"./format.cfb9ca0d.js";import"./auth-user.ae10ce8a.js";import"./index.2cf0d985.js";const Y=S({name:"EditarCliente",props:["clienteData"],setup(e,{emit:o}){const{id:c,nombres:v,direccion:p,tipo_documento:b,num_documento:n,celular:f,email:l}=e.clienteData,i=u(!1),y=u({id:c,nombres:v,tipo_documento:b,num_documento:n,email:l,celular:f,direccion:p}),$=J(),r=async()=>{try{i.value=!0,await V.put("/clientes",y.value),o("actualizarLista"),$.notify({color:"positive",message:"Cliente Editado Exitosamente",icon:"done"}),i.value=!1}catch(d){console.log(d),i.value=!1}};return I(y.value,(d,h)=>{y.value.nombres=d.nombres.toUpperCase()}),{formCliente:y,loading:i,onSubmit:r,options:["Cedula","RUC","Pasaporte"]}}}),Z=t("div",{class:"text-h6"},"Editar Cliente",-1),x={class:"row q-gutter-sm justify-around"},ee={class:"col-xs-12 col-sm-11"},le=t("label",null,"Razon Social:",-1),oe={class:"col-xs-12 col-sm-5 q-my-md"},ae=t("label",null,"Tipo de Documento:",-1),te={class:"col-xs-12 col-sm-5 q-my-md"},ne=t("label",null,"Numero de Documento:",-1),se={class:"col-xs-12 col-sm-5 q-my-md"},ie=t("label",null,"Email:",-1),re={class:"col-xs-12 col-sm-5 q-my-md"},de=t("label",null,"Celular:",-1),me={class:"col-xs-12 col-sm-11"},ue=t("label",null,"Direcci\xF3n:",-1),ce={class:"col-xs-9 col-sm-12 flex justify-center"};function pe(e,o,c,v,p,b){return m(),C(P,{style:{width:"600px","max-width":"80vw"}},{default:s(()=>[a(A,null,{default:s(()=>[Z]),_:1}),a(A,null,{default:s(()=>[a(X,{onSubmit:e.onSubmit},{default:s(()=>[t("div",x,[t("div",ee,[le,a(_,{modelValue:e.formCliente.nombres,"onUpdate:modelValue":o[0]||(o[0]=n=>e.formCliente.nombres=n),dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",oe,[ae,a(M,{modelValue:e.formCliente.tipo_documento,"onUpdate:modelValue":o[1]||(o[1]=n=>e.formCliente.tipo_documento=n),filled:"",options:e.options},null,8,["modelValue","options"])]),t("div",te,[ne,a(_,{modelValue:e.formCliente.num_documento,"onUpdate:modelValue":o[2]||(o[2]=n=>e.formCliente.num_documento=n),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",se,[ie,a(_,{modelValue:e.formCliente.email,"onUpdate:modelValue":o[3]||(o[3]=n=>e.formCliente.email=n),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",re,[de,a(_,{modelValue:e.formCliente.celular,"onUpdate:modelValue":o[4]||(o[4]=n=>e.formCliente.celular=n),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",me,[ue,a(_,{modelValue:e.formCliente.direccion,"onUpdate:modelValue":o[5]||(o[5]=n=>e.formCliente.direccion=n),dense:"",filled:"",required:""},null,8,["modelValue"])]),t("div",ce,[a(g,{loading:e.loading,label:"Editar",class:"q-px-xl",type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var fe=N(Y,[["render",pe]]);const Ce=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"nombres",align:"center",label:"Cliente",field:"nombres",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"num_documento",align:"center",label:"Numero de Documento",field:"num_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],ge=S({name:"IndexCliente",components:{Add:W,Editar:fe},setup(){const{validarPermisos:e}=H(),o=u(""),c=u([]),v=u(!1),p=u(!1),b=u({}),{mostrarNotify:n}=K(),f=u(!1),l=async()=>{v.value=!1,p.value=!1,f.value=!0;try{c.value=[];const{data:{clientes:r}}=await V.get("/clientes");r.forEach(d=>{d.nombres!="CONSUMIDOR FINAL"&&c.value.push(d)})}catch(r){console.log(r)}f.value=!1},i=async(r,d)=>{try{await V.delete(`/clientes/${r}/${d}`),n("positive","Cliente eliminado exitosamente"),l()}catch(h){console.log(h)}},y=async r=>{L.create({title:"\xBFDeseas Eliminar este cliente?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{try{await V.delete(`/clientes/${r}`),n("positive","Cliente eliminado exitosamente"),l()}catch(d){n("negative",d.response.data.message)}})},$=r=>{b.value=r,p.value=!0};return l(),{editarCliente:$,modalAgregarCliente:v,modalEditarCliente:p,activarDesactivarCliente:i,columns:Ce,filter:o,loading:f,getClientes:l,eliminarCliente:y,isPwd:u(!0),rows:c,clienteData:b,validarPermisos:e}}}),ve=t("div",{class:"col-md-6"},[t("label",{class:"text-h6"},"Listado de Clientes")],-1),be={class:"col-md-6 flex justify-end"},ye={class:"row"},_e={class:"col-md-12 col-xs-12"},Ve={class:"q-pa-md"},$e={class:"full-width row flex-center text-lime-10 q-gutter-sm"},we=t("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function ke(e,o,c,v,p,b){const n=Q("Add"),f=Q("Editar");return m(),D(z,null,[a(O,null,{default:s(()=>[t("div",{class:j(["row q-py-lg q-pl-md",e.$q.screen.xs?"justify-center":"justify-between"])},[ve,t("div",be,[e.validarPermisos("Agregar Cliente")&&!e.$q.screen.xs?(m(),C(g,{key:0,color:"secondary","icon-right":"person_add",label:"Agregar Cliente",class:"q-mr-md",onClick:o[0]||(o[0]=l=>e.modalAgregarCliente=!e.modalAgregarCliente)})):w("",!0)])],2),t("div",ye,[t("div",_e,[t("div",Ve,[a(F,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,filter:e.filter,loading:e.loading,"row-key":"name"},{top:s(()=>[a(T),a(_,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":o[1]||(o[1]=l=>e.filter=l)},{append:s(()=>[a(k,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":s(l=>[a(q,{props:l},{default:s(()=>[B(R(l.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":s(l=>[a(q,{props:l},{default:s(()=>[l.value?(m(),C(U,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(m(),C(U,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":s(l=>[a(q,{props:l},{default:s(()=>[e.validarPermisos("Editar Cliente")?(m(),C(g,{key:0,round:"",color:"primary",onClick:i=>e.editarCliente(l.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):w("",!0),l.row.estado?(m(),C(g,{key:1,round:"",color:"blue-grey",icon:"close",onClick:i=>e.activarDesactivarCliente(l.row.id,!1),size:"11px"},null,8,["onClick"])):(m(),D(z,{key:2},[a(g,{round:"",color:"positive",class:"q-mr-sm",icon:"done",onClick:i=>e.activarDesactivarCliente(l.row.id,!0),size:"11px"},null,8,["onClick"]),a(g,{round:"",color:"deep-orange",icon:"delete",onClick:i=>e.eliminarCliente(l.row.id),size:"11px"},null,8,["onClick"])],64))]),_:2},1032,["props"])]),"no-data":s(({icon:l,filter:i})=>[t("div",$e,[a(k,{size:"2em",name:"sentiment_dissatisfied"}),we,a(k,{size:"2em",name:i?"filter_b_and_w":l},null,8,["name"])])]),_:1},8,["rows","columns","filter","loading"])])])])]),_:1}),e.$q.screen.xs&&e.validarPermisos("Agregar Cliente")?(m(),C(G,{key:0,position:"bottom-right",offset:[18,18]},{default:s(()=>[a(g,{round:"",color:"secondary",size:"lg",icon:"add",onClick:o[2]||(o[2]=l=>e.modalAgregarCliente=!e.modalAgregarCliente)})]),_:1})):w("",!0),a(E,{modelValue:e.modalAgregarCliente,"onUpdate:modelValue":o[3]||(o[3]=l=>e.modalAgregarCliente=l)},{default:s(()=>[a(n,{onActualizarLista:e.getClientes},null,8,["onActualizarLista"])]),_:1},8,["modelValue"]),a(E,{modelValue:e.modalEditarCliente,"onUpdate:modelValue":o[4]||(o[4]=l=>e.modalEditarCliente=l)},{default:s(()=>[a(f,{clienteData:e.clienteData,onActualizarLista:e.getClientes},null,8,["clienteData","onActualizarLista"])]),_:1},8,["modelValue"])],64)}var Le=N(ge,[["render",ke]]);export{Le as default};
