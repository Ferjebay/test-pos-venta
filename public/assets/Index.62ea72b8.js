import{l as ye,m as we,n as Ve,p as $e,d as x,r as i,_ as ee,o as g,c as C,f as l,g as s,i as z,e as a,Y as T,h as I,am as G,Q as w,an as Pe,w as qe,ab as h,ao as se,a as ie,C as Y,a9 as j,ap as X,aa as F,aq as ke,af as pe,ae as Ee,ar as ve,ac as y,as as Ie,at as Se,u as Ce,t as Me,ad as ae,au as ue,P as te,av as ce,aw as re}from"./index.0d16ed78.js";import{Q as ne}from"./QSpace.81aae9a6.js";import{Q as W,a as De,b as S}from"./QTable.515a4d9f.js";import{Q as Fe}from"./QBadge.cb33406e.js";import{Q as Re}from"./QPage.30b92492.js";import{u as Ue,Q as Ne}from"./useRolPermisos.8999f7bd.js";import{u as ge,A as M,a as _e}from"./Api.96c094f1.js";import{Q as me,a as fe,C as Z}from"./ClosePopup.285e6612.js";import{d as Qe,Q as Oe}from"./format.cfb9ca0d.js";import{Q as Ae}from"./QForm.fb098f11.js";import{u as de}from"./auth-user.ae10ce8a.js";import{d as ze}from"./date.b3d8e0d8.js";import"./index.2cf0d985.js";var Te=ye({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:o}){const f=we(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>Ve("tr",{class:f.value},$e(o.default))}});const Le=x({name:"FiltrarArticulo",props:["pagination","formFiltrarArticulo","user"],setup(e,{emit:o}){const f=i(!1),_=i([]),d=i(""),{mostrarNotify:u}=ge(),r=async()=>{try{const{data:{proveedores:n}}=await M.get("/proveedores");_.value=[],n.forEach(t=>{_.value.push({label:t.razon_social,value:t.id})})}catch(n){console.log(n)}},p=async()=>{if(e.formFiltrarArticulo.page=(e.pagination.page-1)*e.pagination.rowsPerPage,e.formFiltrarArticulo.rowsPerPage=e.pagination.rowsPerPage,e.user.rol_name!="ADMINISTRADOR"&&e.user.rol_name!="SUPER-ADMINISTRADOR"&&(d.value=e.user.pv_id),e.formFiltrarArticulo.pv_id=d.value,e.formFiltrarArticulo.desde!=""&&e.formFiltrarArticulo.hasta==""||e.formFiltrarArticulo.desde==""&&e.formFiltrarArticulo.hasta!="")return u("warning","Completa los campos de fecha de busqueda");if(e.formFiltrarArticulo.desde>e.formFiltrarArticulo.hasta)return u("warning","Error en el rango de fecha de busqueda");f.value=!0;const{data:n}=await M.post("/articulos/contarArticulos",e.formFiltrarArticulo);n.desde=e.formFiltrarArticulo.desde,n.hasta=e.formFiltrarArticulo.hasta,n.proveedor_id=e.formFiltrarArticulo.proveedor_id,f.value=!1,o("actualizarLista",n)};return r(),{contarArticulos:p,listProveedores:_,loading:f,myLocale:{days:"Domingo_Lunes_Martes_Mi\xE9rcoles_Jueves_Viernes_S\xE1bado".split("_"),daysShort:"Dom_Lun_Mar_Mi\xE9_Jue_Vie_S\xE1b".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"}}}}),Be={class:"row items-center justify-end"},je={class:"row items-center justify-end"};function Je(e,o,f,_,d,u){return g(),C("div",{class:se(["col-md-10 col-xs-12 flex items-center",e.$q.screen.xs?"justify-center":""])},[l(w,{class:"q-ml-md",style:G([{width:"20%"},e.$q.screen.xs?"width: 60%":""]),filled:"",modelValue:e.formFiltrarArticulo.desde,"onUpdate:modelValue":o[1]||(o[1]=r=>e.formFiltrarArticulo.desde=r),dense:"",mask:"date",clearable:"","clear-icon":"close"},{append:s(()=>[l(z,{name:"event",class:"cursor-pointer"},{default:s(()=>[l(me,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[l(fe,{modelValue:e.formFiltrarArticulo.desde,"onUpdate:modelValue":o[0]||(o[0]=r=>e.formFiltrarArticulo.desde=r),locale:e.myLocale},{default:s(()=>[a("div",Be,[T(l(I,{label:"Close",color:"primary",flat:""},null,512),[[Z]])])]),_:1},8,["modelValue","locale"])]),_:1})]),_:1})]),_:1},8,["style","modelValue"]),a("label",{class:"q-mx-md",style:G(e.$q.screen.xs?"width: 60%; text-align:center":"")}," HASTA: ",4),l(w,{filled:"",style:G([{width:"20%"},e.$q.screen.xs?"width: 60%":""]),modelValue:e.formFiltrarArticulo.hasta,"onUpdate:modelValue":o[3]||(o[3]=r=>e.formFiltrarArticulo.hasta=r),dense:"",mask:"date",clearable:"","clear-icon":"close"},{append:s(()=>[l(z,{name:"event",class:"cursor-pointer"},{default:s(()=>[l(me,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[l(fe,{modelValue:e.formFiltrarArticulo.hasta,"onUpdate:modelValue":o[2]||(o[2]=r=>e.formFiltrarArticulo.hasta=r),locale:e.myLocale},{default:s(()=>[a("div",je,[T(l(I,{label:"Close",color:"primary",flat:""},null,512),[[Z]])])]),_:1},8,["modelValue","locale"])]),_:1})]),_:1})]),_:1},8,["style","modelValue"]),l(W,{filled:"",required:"",dense:"","emit-value":"","map-options":"",style:G([{width:"36%","margin-left":"27px"},e.$q.screen.xs?"width: 52%; margin-right: 0px; margin-top:30px":""]),modelValue:e.formFiltrarArticulo.proveedor_id,"onUpdate:modelValue":o[5]||(o[5]=r=>e.formFiltrarArticulo.proveedor_id=r),options:e.listProveedores,label:"Seleccionar proveedor"},Pe({"no-option":s(()=>[l(Qe,null,{default:s(()=>[l(Oe,{class:"text-grey"},{default:s(()=>[h(" No hay resultados ")]),_:1})]),_:1})]),_:2},[e.formFiltrarArticulo.proveedor_id!==""?{name:"append",fn:s(()=>[l(z,{name:"cancel",onClick:o[4]||(o[4]=qe(r=>e.formFiltrarArticulo.proveedor_id="",["stop","prevent"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["style","modelValue","options"]),l(I,{round:"",color:"black",icon:"search",loading:e.loading,style:G(e.$q.screen.xs?"margin-top:30px;":""),class:"q-ml-md",onClick:e.contarArticulos},null,8,["loading","style","onClick"])],2)}var He=ee(Le,[["render",Je]]);const Ke=[{name:"num",field:"num",label:"#",align:"left"},{name:"imei",align:"center",label:"IMEI",field:"imei"},{name:"color",label:"COLOR",field:"color",align:"center"},{name:"acciones",label:"ACCIONES",align:"center"}],Ge=x({name:"AgregarArticulo",setup(e,{emit:o}){const f=de(),{claim:{user:_}}=ie.read(f.token),d=i({detalle:"",marca:"",modelo:"",proveedor_id:"",pv_id:"",precio_base:""}),u=i(""),r=i([]),p=i([]),n=i([]),t=i(!1),V=i(!1),{mostrarNotify:A}=ge(),J=async()=>{if(u.value.length==0||u.value=="")return A("warning","Debes agregar el codigo IMEI");V.value=!0;const{data:c}=await M.get(`/articulos/${u.value}`);if(c.articulo.length>0)return u.value="",V.value=!1,A("warning","Este IMEI ya se encuentra agregado en el inventario");if(V.value=!1,n.value.some(U=>U.imei==u.value))return u.value="",A("warning","Este codigo IMEI ya se encuentra ingresado");n.value.unshift({num:n.value.length+1,imei:u.value,color:""}),u.value=""},$=async()=>{try{const{data:{proveedores:c}}=await M.get("/proveedores");r.value=[],r.value.push({label:"SIN PROVEEDOR",value:6}),c.forEach(m=>{m.estado=="1"&&m.id!=6&&r.value.push({label:m.razon_social,value:m.id})})}catch(c){console.log(c)}},Q=async()=>{try{const{data:{puntos_ventas:c}}=await M.get("/puntos_ventas");p.value=[],c.forEach(m=>{m.estado=="1"&&m.nombre!="OTROS-JEFE"&&p.value.push({label:m.nombre,value:m.id})})}catch(c){console.log(c)}t.value=!1};$(),Q();const O=c=>{const m=n.value.findIndex(U=>U.imei==c.imei);n.value.splice(m,1)},q=async()=>{if(_.rol_name=="INDEPENDIENTE"&&(d.value.pv_id=_.pv_id),d.value.marca.length==0)return A("warning","Por favor, completa el campo marca");if(d.value.modelo.length==0)return A("warning","Por favor, completa el campo modelo");if(d.value.proveedor_id.length==0)return A("warning","Por favor, elige un proveedor");if(d.value.pv_id.length==0)return A("warning","Por favor, elige un punto de venta");if(d.value.precio_base.length==0)return A("warning","Por favor, ingresa el precio base");if(n.value.length==0)return A("warning","Debes agregar al menos 1 codigo IMEI");d.value.detalles=n.value;try{t.value=!0,await M.post("/articulos",d.value),o("actualizarLista"),A("positive","Articulos Agregados Exitosamente"),t.value=!1}catch(c){console.log(c),t.value=!1}};return Y(d.value,(c,m)=>{d.value.marca=c.marca.toUpperCase(),d.value.modelo=c.modelo.toUpperCase()}),{agregarDetalles:J,eliminarFila:O,rows:n,columns:Ke,cod_imei:u,listProveedores:r,listPV:p,loading:t,loadingState:V,formArticulo:d,submit:q,user:_}}}),R=e=>(Ie("data-v-c03cd7b0"),e=e(),Se(),e),We=R(()=>a("div",{class:"text-h6"},"Agregar Articulo(s)",-1)),Ye={class:"row q-gutter-md"},Xe={class:"offset-1 col-xs-10 col-sm-5"},Ze=R(()=>a("label",null,"Marca:",-1)),xe={class:"col-xs-10 col-sm-5"},eo=R(()=>a("label",null,"Modelo:",-1)),oo={class:"offset-1 col-xs-10 col-sm-5"},lo=R(()=>a("label",null,"Proveedor:",-1)),ao={class:"col-xs-10 col-sm-5"},to=R(()=>a("label",null,"Precio Base:",-1)),ro={key:0,class:"offset-1 col-xs-10 col-sm-10"},so=R(()=>a("label",null,"Detalle:",-1)),io={class:"offset-1 col-xs-10 col-sm-6"},no=R(()=>a("label",null,"Ingresar Codigo IMEI:",-1)),uo={key:1,class:"col-xs-10 col-sm-4"},co=R(()=>a("label",null,"Punto de Venta:",-1)),mo={key:2,class:"col-12"},fo={class:"q-pa-md scrollbar",id:"div1",style:{"padding-right":"3px","padding-top":"0px"}},po={style:{width:"100%"},class:"force-overflow"},vo=R(()=>a("thead",{class:"text-center"},[a("th",null,"#"),a("th",null,"IMEI"),a("th",null,"COLOR"),a("th",null,"QUITAR")],-1)),go={class:"text-center"},_o={style:{width:"10%"}},Ao={style:{width:"35%"}},bo={style:{width:"30%"}},ho={style:{width:"25%"}},yo={class:"col-xs-9 col-sm-12 flex justify-center"};function wo(e,o,f,_,d,u){return g(),j(ve,{style:{width:"700px","max-width":"80vw"}},{default:s(()=>[l(X,{class:"row items-center q-pb-none"},{default:s(()=>[We,l(ne),T(l(I,{icon:"close",flat:"",round:"",dense:""},null,512),[[Z]])]),_:1}),l(X,null,{default:s(()=>[l(Ae,null,{default:s(()=>[a("div",Ye,[a("div",Xe,[Ze,l(w,{modelValue:e.formArticulo.marca,"onUpdate:modelValue":o[0]||(o[0]=r=>e.formArticulo.marca=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",xe,[eo,l(w,{modelValue:e.formArticulo.modelo,"onUpdate:modelValue":o[1]||(o[1]=r=>e.formArticulo.modelo=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",oo,[lo,l(W,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formArticulo.proveedor_id,"onUpdate:modelValue":o[2]||(o[2]=r=>e.formArticulo.proveedor_id=r),options:e.listProveedores},null,8,["modelValue","options"])]),a("div",ao,[to,l(w,{type:"number",modelValue:e.formArticulo.precio_base,"onUpdate:modelValue":o[3]||(o[3]=r=>e.formArticulo.precio_base=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},{prepend:s(()=>[l(z,{name:"attach_money"})]),_:1},8,["modelValue"])]),e.formArticulo.proveedor_id==6?(g(),C("div",ro,[so,l(w,{modelValue:e.formArticulo.detalle,"onUpdate:modelValue":o[4]||(o[4]=r=>e.formArticulo.detalle=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])])):F("",!0),a("div",io,[no,l(w,{dense:"",filled:"",type:"number",loading:e.loadingState,pattern:"[0-9]+",modelValue:e.cod_imei,"onUpdate:modelValue":o[5]||(o[5]=r=>e.cod_imei=r),modelModifiers:{trim:!0},onKeyup:ke(e.agregarDetalles,["enter"])},null,8,["loading","modelValue","onKeyup"])]),e.user.rol_name=="SUPER-ADMINISTRADOR"||e.user.rol_name=="ADMINISTRADOR"?(g(),C("div",uo,[co,l(W,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formArticulo.pv_id,"onUpdate:modelValue":o[6]||(o[6]=r=>e.formArticulo.pv_id=r),options:e.listPV},null,8,["modelValue","options"])])):F("",!0),e.rows.length>0?(g(),C("div",mo,[a("div",fo,[a("table",po,[vo,a("tbody",go,[(g(!0),C(pe,null,Ee(e.rows,(r,p)=>(g(),C("tr",{key:p},[a("td",_o,y(p+1),1),a("td",Ao,y(r.imei),1),a("td",bo,[l(w,{modelValue:r.color,"onUpdate:modelValue":n=>r.color=n,"input-class":"text-center",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),a("td",ho,[l(I,{round:"",color:"blue-grey",icon:"close",onClick:n=>e.eliminarFila(r),size:"sm"},null,8,["onClick"])])]))),128))])])])])):F("",!0),a("div",yo,[l(I,{onClick:e.submit,loading:e.loading,label:"Guardar",class:"q-px-xl",color:"green-9"},null,8,["onClick","loading"])])])]),_:1})]),_:1})]),_:1})}var Vo=ee(Ge,[["render",wo],["__scopeId","data-v-c03cd7b0"]]);const $o=x({name:"EditarArticulo",props:["articuloData"],setup(e,{emit:o}){const f=de(),{claim:{user:_}}=ie.read(f.token),{id:d,proveedor_id:u,detalle:r,pv_id:p,marca:n,modelo:t,precio_base:V,imei:A,color:J}=e.articuloData,$=i({detalle:r,marca:n,modelo:t,proveedor_id:u,pv_id:p,precio_base:V.toFixed(2),imei:A,color:J}),Q=i([]),O=i([]),q=i(!1),c=_e(),m=(b,k)=>{c.notify({type:b,message:k,position:"top-right"})},U=async()=>{try{const{data:{proveedores:b}}=await M.get("/proveedores");Q.value=[],b.forEach(k=>{Q.value.push({label:k.razon_social,value:k.id})})}catch(b){console.log(b)}},H=async()=>{try{const{data:{puntos_ventas:b}}=await M.get("/puntos_ventas");O.value=[],b.forEach(k=>{k.estado=="1"&&k.nombre!="OTROS-JEFE"&&O.value.push({label:k.nombre,value:k.id})})}catch(b){console.log(b)}q.value=!1};U(),H();const v=async()=>{if($.value.marca.length==0)return m("warning","Por favor, completa el campo marca");if($.value.modelo.length==0)return m("warning","Por favor, completa el campo modelo");if($.value.proveedor_id.length==0)return m("warning","Por favor, elige un proveedor");if($.value.precio_base.length==0)return m("warning","Por favor, ingresa el precio base");try{q.value=!0,await M.put(`/articulos/${d}`,$.value),m("positive","Articulo editado exitosamente"),o("actualizarLista"),q.value=!1}catch(b){console.log(b),q.value=!1}};return Y($.value,(b,k)=>{$.value.marca=b.marca.toUpperCase(),$.value.modelo=b.modelo.toUpperCase()}),{listProveedores:Q,listPV:O,loading:q,formArticulo:$,submit:v,user:_}}}),Po=a("div",{class:"text-h6"},"Editar Articulo(s)",-1),qo={class:"row q-gutter-md"},ko={class:"offset-1 col-xs-10 col-sm-5"},Eo=a("label",null,"Marca:",-1),Io={class:"col-xs-10 col-sm-5"},So=a("label",null,"Modelo:",-1),Co={class:"offset-1 col-xs-10 col-sm-5"},Mo=a("label",null,"Proveedor:",-1),Do={class:"col-xs-10 col-sm-5"},Fo=a("label",null,"Precio Base:",-1),Ro={key:0,class:"offset-1 col-xs-10 col-sm-10"},Uo=a("label",null,"Detalle:",-1),No={class:"offset-1 col-xs-10 col-sm-6"},Qo=a("label",null,"Ingresar Codigo IMEI:",-1),Oo={class:"col-xs-10 col-sm-4"},zo=a("label",null,"Color:",-1),To={key:1,class:"col-xs-10 offset-1 col-sm-4"},Lo=a("label",null,"Punto de Venta:",-1),Bo={class:"col-xs-9 col-sm-12 flex justify-center"};function jo(e,o,f,_,d,u){return g(),j(ve,{style:{width:"700px","max-width":"80vw"}},{default:s(()=>[l(X,{class:"row items-center q-pb-none"},{default:s(()=>[Po,l(ne),T(l(I,{icon:"close",flat:"",round:"",dense:""},null,512),[[Z]])]),_:1}),l(X,null,{default:s(()=>[l(Ae,null,{default:s(()=>[a("div",qo,[a("div",ko,[Eo,l(w,{modelValue:e.formArticulo.marca,"onUpdate:modelValue":o[0]||(o[0]=r=>e.formArticulo.marca=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",Io,[So,l(w,{modelValue:e.formArticulo.modelo,"onUpdate:modelValue":o[1]||(o[1]=r=>e.formArticulo.modelo=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),a("div",Co,[Mo,l(W,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formArticulo.proveedor_id,"onUpdate:modelValue":o[2]||(o[2]=r=>e.formArticulo.proveedor_id=r),options:e.listProveedores},null,8,["modelValue","options"])]),a("div",Do,[Fo,l(w,{type:"number",modelValue:e.formArticulo.precio_base,"onUpdate:modelValue":o[3]||(o[3]=r=>e.formArticulo.precio_base=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])]),e.formArticulo.proveedor_id==6?(g(),C("div",Ro,[Uo,l(w,{modelValue:e.formArticulo.detalle,"onUpdate:modelValue":o[4]||(o[4]=r=>e.formArticulo.detalle=r),modelModifiers:{trim:!0},dense:"",filled:"",required:""},null,8,["modelValue"])])):F("",!0),a("div",No,[Qo,l(w,{dense:"",filled:"",modelValue:e.formArticulo.imei,"onUpdate:modelValue":o[5]||(o[5]=r=>e.formArticulo.imei=r),modelModifiers:{trim:!0}},null,8,["modelValue"])]),a("div",Oo,[zo,l(w,{dense:"",filled:"",modelValue:e.formArticulo.color,"onUpdate:modelValue":o[6]||(o[6]=r=>e.formArticulo.color=r),modelModifiers:{trim:!0}},null,8,["modelValue"])]),e.user.rol_name=="SUPER-ADMINISTRADOR"||e.user.rol_name=="ADMINISTRADOR"?(g(),C("div",To,[Lo,l(W,{filled:"",required:"",dense:"","emit-value":"","map-options":"",modelValue:e.formArticulo.pv_id,"onUpdate:modelValue":o[7]||(o[7]=r=>e.formArticulo.pv_id=r),options:e.listPV},null,8,["modelValue","options"])])):F("",!0),a("div",Bo,[l(I,{onClick:e.submit,loading:e.loading,label:"Editar",class:"q-px-xl",color:"green-9"},null,8,["onClick","loading"])])])]),_:1})]),_:1})]),_:1})}var Jo=ee($o,[["render",jo]]);const Ho=[{name:"acciones",label:"acciones",align:"center"},{name:"marca",label:"Marca",align:"center",field:"marca"},{name:"modelo",label:"Modelo",align:"center",field:"modelo"},{name:"proveedor_id",label:"Proveedor",align:"center",field:"razon_social"},{name:"detalle",label:"Detalles",align:"center",field:"detalle",style:"width: 100px"},{name:"imei",label:"IMEI",align:"center",field:"imei"},{name:"color",label:"Color",align:"center",field:"color"},{name:"precio_base",label:"Precio Base",align:"center",field:"precio_base"},{name:"fecha_creacion",label:"Fecha Creaci\xF3n",align:"center",field:"fecha_creacion"},{name:"pv_nombre",label:"PV",align:"center",field:"pv_nombre"},{name:"estado",label:"Estado",align:"center"}],Ko=x({name:"IndexArticulo",components:{AgregarArticulo:Vo,EditarArticulo:Jo,FiltrarArticulos:He},setup(){const{validarPermisos:e}=Ue(),o=de(),{claim:{user:f}}=ie.read(o.token),_=i(null),d=i("imei"),u=i("todos"),r=i(""),p=i({desde:"",hasta:"",proveedor_id:"",page:"",rowsPerPage:"",tipoEstado:"todos"}),n=i(!1),t=i(!1),V=i(!1),A=i(""),J=Ce(),$=_e(),Q=i([]),O=i([]),q=i([]),c=i(""),m=i(""),U=i(),H=i(!1),v=i({sortBy:"desc",descending:!1,page:1,rowsPerPage:7,rowsNumber:10}),b=(E=null)=>{L(0,v.value.rowsPerPage,E)},k=async E=>{try{$.dialog({title:"Deseas Eliminar este articulo?",message:"Una vez eliminado no podra recuperarse...!",ok:{push:!0,label:"Eliminar",color:"teal-7"},cancel:{push:!0,color:"blue-grey-8",label:"Cancelar"}}).onOk(async()=>{te.show({message:"Cargando..."}),await M.delete(`/articulos/${E}`),L(0,v.value.rowsPerPage,null),$.notify({color:"positive",message:"Articulo Eliminado Exitosamente",icon:"done",position:"top-right"}),te.hide()})}catch(N){te.hide(),console.log(N)}},be=async E=>{_.value=E,V.value=!0},L=async(E,N,D=null)=>{t.value=!1,V.value=!1;let K=0;var B=[];c.value==""?K="sin-busqueda":K=c.value,f.rol_name!="ADMINISTRADOR"&&f.rol_name!="SUPER-ADMINISTRADOR"&&(m.value=f.pv_id);try{if(D==null){const{data:P}=await M.post("/articulos/contarArticulos",{page:E,rowsPerPage:N,busqueda:K,tipoBusqueda:d.value,tipoEstado:u.value,desde:p.value.desde,hasta:p.value.hasta,proveedor_id:p.value.proveedor_id,pv_id:m.value});B=P.articulos,P.articulos.length!=0?v.value.rowsNumber=P.articulos[0].totalArticulos:v.value.rowsNumber=0}else B=D.articulos,D.articulosContados!=null?A.value=D.articulosContados[0]:A.value="",D.articulos.length==0?v.value.rowsNumber=0:v.value.rowsNumber=D.articulos[0].totalArticulos;B.map(P=>{let oe=P.fecha_creacion.split("T")[0].split("-");if(P.fecha_creacion=`${oe[2]}/${oe[1]}/${oe[0]}`,P.estado=="0"){let le=P.fecha_venta.split("T")[0].split("-");P.fecha_venta=`${le[2]}/${le[1]}/${le[0]}`}}),q.value=B}catch(P){console.log(P)}};async function he(E){const{page:N,rowsPerPage:D,sortBy:K,descending:B}=E.pagination;H.value=!0;const P=(N-1)*D;await L(P,D),q.value.length!=0?v.value.rowsNumber=q.value[0].totalArticulos:v.value.rowsNumber=0,v.value.page=N,v.value.rowsPerPage=D,v.value.sortBy=K,v.value.descending=B,H.value=!1}return Me(()=>{U.value.requestServerInteraction()}),Y(d,(E,N)=>{L(0,v.value.rowsPerPage,null)}),Y(u,(E,N)=>{p.value.tipoEstado=E,L(0,v.value.rowsPerPage,null)}),{articuloData:_,actualizarLista:b,columns:Ho,date:ze,editarArticulo:be,eliminarArticulo:k,getArticulos:L,filter:c,formFiltrarArticulo:p,modalAgregarArticulo:t,modalEditarArticulo:V,modalFiltrarArticulo:n,listPV:O,loading:H,pvSelected:r,originalRows:Q,router:J,rows:q,tableRef:U,tipoBusqueda:d,tipoEstado:u,onRequest:he,pagination:v,stockArticulos:A,validarPermisos:e,user:f}}}),Go={class:"row q-py-lg q-pl-md"},Wo={class:"col-md-2 flex justify-end"},Yo={class:"row"},Xo={class:"col-md-12 col-xs-12"},Zo={class:"q-px-md q-pt-none"},xo={class:"text-left col-sm-4"},el={class:"text-right col-sm-4"},ol=a("label",{class:"q-mr-xl q-pr-xl text-weight-medium"}," Buscar por: ",-1),ll=a("label",{class:"q-mr-xl text-h6 text-weight-regular"},"Listado de Productos",-1),al={class:"q-ml-xl text-subtitle1"},tl=a("b",null,"INGRESOS:",-1),rl={class:"q-mx-xl text-subtitle1"},sl=a("b",null,"VENDIDOS:",-1),il={class:"text-subtitle1"},nl=a("b",null,"STOCK:",-1),dl={key:0},ul={key:1},cl=a("br",null,null,-1),ml={class:"full-width row flex-center text-lime-10 q-gutter-sm"},fl=a("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function pl(e,o,f,_,d,u){const r=ae("FiltrarArticulos"),p=ae("AgregarArticulo"),n=ae("EditarArticulo");return g(),C(pe,null,[l(Re,null,{default:s(()=>[a("div",Go,[l(r,{pagination:e.pagination,formFiltrarArticulo:e.formFiltrarArticulo,user:e.user,onActualizarLista:e.actualizarLista},null,8,["pagination","formFiltrarArticulo","user","onActualizarLista"]),a("div",Wo,[e.validarPermisos("Agregar Articulo")&&!e.$q.screen.xs?(g(),j(I,{key:0,color:"secondary","icon-right":"add_circle",class:"q-mr-md",label:"Nuevo",onClick:o[0]||(o[0]=t=>e.modalAgregarArticulo=!0)})):F("",!0)])]),a("div",Yo,[a("div",Xo,[a("div",Zo,[a("div",{class:se(["row q-mb-sm",e.$q.screen.xs?"justify-center":"justify-between"])},[a("div",xo,[a("label",{class:se(["text-weight-medium",e.$q.screen.xs?"q-ml-xl q-pl-xl":""])}," Mostrar articulos: ",2),l(ce,{modelValue:e.tipoEstado,"onUpdate:modelValue":o[1]||(o[1]=t=>e.tipoEstado=t),inline:"",style:{"margin-bottom":"0px"},class:"q-mb-md q-mr-md",options:[{label:"Todos",value:"todos"},{label:"En Stock",value:"stock"},{label:"Vendidos",value:"vendidos"}]},null,8,["modelValue"])]),a("div",el,[ol,l(ce,{modelValue:e.tipoBusqueda,"onUpdate:modelValue":o[2]||(o[2]=t=>e.tipoBusqueda=t),inline:"",style:{"margin-bottom":"0px"},class:"q-mb-md q-mr-md",options:[{label:"IMEI",value:"imei"},{label:"MARCA",value:"marca"},{label:"MODELO",value:"modelo"}]},null,8,["modelValue"])])],2),l(De,{class:"my-sticky-header-table",ref:"tableRef",rows:e.rows,columns:e.columns,filter:e.filter,"row-key":"id",pagination:e.pagination,"onUpdate:pagination":o[4]||(o[4]=t=>e.pagination=t),loading:e.loading,"rows-per-page-options":[3,7,15,0],"binary-state-sort":"",onRequest:e.onRequest},{top:s(()=>[ll,T(a("label",al,[tl,h(" "+y(e.stockArticulos.total),1)],512),[[re,e.stockArticulos!=""]]),T(a("label",rl,[sl,h(" "+y(e.stockArticulos.vendidos),1)],512),[[re,e.stockArticulos!=""]]),T(a("label",il,[nl,h(" "+y(e.stockArticulos.en_stock),1)],512),[[re,e.stockArticulos!=""]]),l(ne),l(w,{dense:"",debounce:"1000",color:"primary",modelValue:e.filter,"onUpdate:modelValue":o[3]||(o[3]=t=>e.filter=t)},{append:s(()=>[l(z,{name:"search"})]),_:1},8,["modelValue"])]),body:s(t=>[l(Te,{props:t},{default:s(()=>[l(S,{key:"acciones",props:t},{default:s(()=>[e.validarPermisos("Editar Articulo")&&t.row.estado?(g(),j(I,{key:0,round:"",color:"blue-grey",icon:"edit",class:"q-mr-sm",onClick:V=>e.editarArticulo(t.row),size:"10px"},null,8,["onClick"])):F("",!0),e.validarPermisos("Eliminar Articulo")&&t.row.estado?(g(),j(I,{key:1,round:"",color:"blue-grey",icon:"close",onClick:V=>e.eliminarArticulo(t.row.id),size:"10px"},null,8,["onClick"])):F("",!0)]),_:2},1032,["props"]),l(S,{key:"marca",props:t},{default:s(()=>[h(y(t.row.marca),1)]),_:2},1032,["props"]),l(S,{key:"modelo",props:t},{default:s(()=>[h(y(t.row.modelo),1)]),_:2},1032,["props"]),l(S,{key:"proveedor_id",props:t},{default:s(()=>[h(y(t.row.razon_social),1)]),_:2},1032,["props"]),l(S,{key:"detalle",props:t},{default:s(()=>[h(y(t.row.detalle==""?"---":t.row.detalle),1)]),_:2},1032,["props"]),l(S,{key:"imei",props:t},{default:s(()=>[h(y(t.row.imei),1)]),_:2},1032,["props"]),l(S,{key:"color",props:t},{default:s(()=>[h(y(t.row.color==""?"---":t.row.color),1)]),_:2},1032,["props"]),l(S,{key:"precio_base",props:t},{default:s(()=>[h("$"+y(t.row.precio_base.toFixed(2)),1)]),_:2},1032,["props"]),l(S,{key:"fecha_creacion",props:t},{default:s(()=>[h(y(t.row.fecha_creacion),1)]),_:2},1032,["props"]),l(S,{key:"pv_nombre",props:t},{default:s(()=>[h(y(t.row.pv_nombre),1)]),_:2},1032,["props"]),l(S,{key:"estado",props:t},{default:s(()=>[l(Fe,{outline:"",class:"q-py-xs q-px-md",color:t.row.estado?"positive":"dark"},{default:s(()=>[t.row.estado?(g(),C("span",dl," En Stock ")):(g(),C("span",ul,[h(" Vendido "),cl,h(" "+y(t.row.fecha_venta),1)]))]),_:2},1032,["color"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),"no-data":s(({icon:t,filter:V})=>[a("div",ml,[l(z,{size:"2em",name:"sentiment_dissatisfied"}),fl,l(z,{size:"2em",name:V?"filter_b_and_w":t},null,8,["name"])])]),_:1},8,["rows","columns","filter","pagination","loading","onRequest"])])])])]),_:1}),e.$q.screen.xs&&e.validarPermisos("Agregar Articulo")?(g(),j(Ne,{key:0,position:"bottom-right",offset:[18,18]},{default:s(()=>[l(I,{round:"",color:"secondary",size:"lg",icon:"add",onClick:o[5]||(o[5]=t=>e.modalAgregarArticulo=!0)})]),_:1})):F("",!0),l(ue,{modelValue:e.modalAgregarArticulo,"onUpdate:modelValue":o[7]||(o[7]=t=>e.modalAgregarArticulo=t),persistent:""},{default:s(()=>[l(p,{onActualizarLista:o[6]||(o[6]=t=>e.getArticulos(0,e.pagination.rowsPerPage,null))})]),_:1},8,["modelValue"]),l(ue,{modelValue:e.modalEditarArticulo,"onUpdate:modelValue":o[9]||(o[9]=t=>e.modalEditarArticulo=t)},{default:s(()=>[l(n,{articuloData:e.articuloData,onActualizarLista:o[8]||(o[8]=t=>e.getArticulos(0,e.pagination.rowsPerPage,null))},null,8,["articuloData"])]),_:1},8,["modelValue"])],64)}var El=ee(Ko,[["render",pl]]);export{El as default};
