import{d as C,r as m,C as U,_ as A,o as p,a9 as g,g as d,f as r,ap as $,e as l,Q as u,h as P,ar as E,ad as Q,c as j,aa as V,au as k,af as L,ao as R,i as z,ab as B,ac as M}from"./index.9c5c742c.js";import{Q as T}from"./QSpace.6c16747b.js";import{Q as S,a as F,b as h}from"./QTable.28ce5880.js";import{Q as D}from"./QBadge.1183cf7c.js";import{Q as G}from"./QPage.27f1013e.js";import{u as H,Q as J}from"./useRolPermisos.8610c2bb.js";import{a as N,A as q,u as K}from"./Api.dae86ed2.js";import{Q as I}from"./QForm.9649030d.js";import"./format.bda3f914.js";import"./auth-user.39da1b8c.js";import"./index.2cf0d985.js";const O=C({name:"AgregarProveedor",setup(e,{emit:o}){const n=m(!1),t=m({razon_social:"",tipo_documento:"",num_documento:"",email:"",celular:"",direccion:""}),c=N(),v=async()=>{try{n.value=!0,await q.post("/proveedores",t.value),o("actualizarLista"),c.notify({color:"positive",message:"Proveedor Agregado Exitosamente",icon:"done"}),n.value=!1}catch(a){console.log(a),n.value=!1}};return U(t.value,(a,_)=>{t.value.razon_social=a.razon_social.toUpperCase()}),{formProveedor:t,onSubmit:v,options:["Cedula","RUC","Pasaporte"]}}}),W=l("div",{class:"text-h6"},"Agregar Proveedor",-1),X={class:"row q-gutter-sm justify-around"},Y={class:"col-xs-12 col-sm-11"},Z=l("label",null,"Razon Social:",-1),x={class:"col-xs-12 col-sm-5 q-my-md"},ee=l("label",null,"Tipo de Documento:",-1),oe={class:"col-xs-12 col-sm-5 q-my-md"},le=l("label",null,"Numero de Documento:",-1),re={class:"col-xs-12 col-sm-5 q-my-md"},ae=l("label",null,"Email:",-1),se={class:"col-xs-12 col-sm-5 q-my-md"},de=l("label",null,"Celular:",-1),te={class:"col-xs-12 col-sm-11"},ne=l("label",null,"Direcci\xF3n:",-1),ie={class:"col-xs-9 col-sm-12 flex justify-center"};function me(e,o,n,t,c,v){return p(),g(E,{style:{width:"600px","max-width":"80vw"}},{default:d(()=>[r($,null,{default:d(()=>[W]),_:1}),r($,null,{default:d(()=>[r(I,{onSubmit:e.onSubmit},{default:d(()=>[l("div",X,[l("div",Y,[Z,r(u,{modelValue:e.formProveedor.razon_social,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formProveedor.razon_social=a),dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",x,[ee,r(S,{modelValue:e.formProveedor.tipo_documento,"onUpdate:modelValue":o[1]||(o[1]=a=>e.formProveedor.tipo_documento=a),filled:"",options:e.options},null,8,["modelValue","options"])]),l("div",oe,[le,r(u,{modelValue:e.formProveedor.num_documento,"onUpdate:modelValue":o[2]||(o[2]=a=>e.formProveedor.num_documento=a),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",re,[ae,r(u,{modelValue:e.formProveedor.email,"onUpdate:modelValue":o[3]||(o[3]=a=>e.formProveedor.email=a),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",se,[de,r(u,{modelValue:e.formProveedor.celular,"onUpdate:modelValue":o[4]||(o[4]=a=>e.formProveedor.celular=a),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",te,[ne,r(u,{modelValue:e.formProveedor.direccion,"onUpdate:modelValue":o[5]||(o[5]=a=>e.formProveedor.direccion=a),dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",ie,[r(P,{label:"Guardar",class:"q-px-xl",type:"submit",color:"green-9"})])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var ue=A(O,[["render",me]]);const ce=C({name:"EditarProveedor",props:["proveedorData"],setup(e,{emit:o}){const{id:n,razon_social:t,direccion:c,tipo_documento:v,numero_documento:a,celular:_,email:s}=e.proveedorData,i=m(!1),y=m({id:n,razon_social:t,tipo_documento:v,numero_documento:a,email:s,celular:_,direccion:c}),f=N(),w=async()=>{try{i.value=!0,await q.put("/proveedores",y.value),o("actualizarLista"),f.notify({color:"positive",message:"Proveedor Editado Exitosamente",icon:"done"}),i.value=!1}catch(b){console.log(b),i.value=!1}};return U(y.value,(b,Be)=>{y.value.razon_social=b.razon_social.toUpperCase()}),{formProveedor:y,loading:i,onSubmit:w,options:["Cedula","RUC","Pasaporte"]}}}),ve=l("div",{class:"text-h6"},"Editar Proveedor",-1),pe={class:"row q-gutter-sm justify-around"},fe={class:"col-xs-12 col-sm-11"},ge=l("label",null,"Razon Social:",-1),Pe={class:"col-xs-12 col-sm-5 q-my-md"},_e=l("label",null,"Tipo de Documento:",-1),ye={class:"col-xs-12 col-sm-5 q-my-md"},be=l("label",null,"Numero de Documento:",-1),Ve={class:"col-xs-12 col-sm-5 q-my-md"},$e=l("label",null,"Email:",-1),qe={class:"col-xs-12 col-sm-5 q-my-md"},we=l("label",null,"Celular:",-1),ze={class:"col-xs-12 col-sm-11"},he=l("label",null,"Direcci\xF3n:",-1),Ce={class:"col-xs-9 col-sm-12 flex justify-center"};function Ae(e,o,n,t,c,v){return p(),g(E,{style:{width:"600px","max-width":"80vw"}},{default:d(()=>[r($,null,{default:d(()=>[ve]),_:1}),r($,null,{default:d(()=>[r(I,{onSubmit:e.onSubmit},{default:d(()=>[l("div",pe,[l("div",fe,[ge,r(u,{modelValue:e.formProveedor.razon_social,"onUpdate:modelValue":o[0]||(o[0]=a=>e.formProveedor.razon_social=a),dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",Pe,[_e,r(S,{modelValue:e.formProveedor.tipo_documento,"onUpdate:modelValue":o[1]||(o[1]=a=>e.formProveedor.tipo_documento=a),filled:"",options:e.options},null,8,["modelValue","options"])]),l("div",ye,[be,r(u,{modelValue:e.formProveedor.numero_documento,"onUpdate:modelValue":o[2]||(o[2]=a=>e.formProveedor.numero_documento=a),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",Ve,[$e,r(u,{modelValue:e.formProveedor.email,"onUpdate:modelValue":o[3]||(o[3]=a=>e.formProveedor.email=a),modelModifiers:{trim:!0},type:"email",dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",qe,[we,r(u,{modelValue:e.formProveedor.celular,"onUpdate:modelValue":o[4]||(o[4]=a=>e.formProveedor.celular=a),modelModifiers:{trim:!0},type:"number",dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",ze,[he,r(u,{modelValue:e.formProveedor.direccion,"onUpdate:modelValue":o[5]||(o[5]=a=>e.formProveedor.direccion=a),dense:"",filled:"",required:""},null,8,["modelValue"])]),l("div",Ce,[r(P,{loading:e.loading,label:"Editar",class:"q-px-xl",type:"submit",color:"green-9"},null,8,["loading"])])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}var Qe=A(ce,[["render",Ae]]);const ke=[{name:"id",label:"#",align:"left",field:"id",sortable:!0},{name:"razon_social",align:"center",label:"Razon Social",field:"razon_social",sortable:!0},{name:"tipo_documento",align:"center",label:"Tipo de Documento",field:"tipo_documento"},{name:"numero_documento",align:"center",label:"Numero de Documento",field:"numero_documento"},{name:"email",label:"Email",field:"email",align:"center"},{name:"celular",label:"Celular",field:"celular",align:"center"},{name:"estado",label:"Estado",align:"center",field:"estado"},{name:"acciones",label:"acciones",align:"center"}],De=C({name:"IndexProveedor",components:{Add:ue,Editar:Qe},setup(){const{validarPermisos:e}=H(),o=m(""),n=m([]),t=m(!1),c=m(!1),v=m(!1),a=m({}),{mostrarNotify:_}=K(),s=async()=>{t.value=!1,c.value=!1,v.value=!0;try{const{data:{proveedores:f}}=await q.get("/proveedores");n.value=f}catch(f){console.log(f)}v.value=!1},i=async(f,w)=>{try{await q.delete(`/proveedores/${f}/${w}`),_("positive","Proveedor eliminado exitosamente"),s()}catch(b){console.log(b)}},y=f=>{a.value=f,c.value=!0};return s(),{editarProveedor:y,modalAgregarProveedor:t,modalEditarProveedor:c,activarDesactivarProveedor:i,columns:ke,loading:v,filter:o,getProveedores:s,isPwd:m(!0),rows:n,proveedorData:a,validarPermisos:e}}}),Ue=l("div",{class:"col-md-6"},[l("label",{class:"text-h6"},"Listado de Proveedores")],-1),Ee={class:"col-md-6 flex justify-end"},Se={class:"row"},Ne={class:"col-md-12 col-xs-12"},Ie={class:"q-pa-md"},je={class:"full-width row flex-center text-lime-10 q-gutter-sm"},Le=l("span",{class:"text-subtitle1"}," No se encontr\xF3 ningun Resultado ",-1);function Re(e,o,n,t,c,v){const a=Q("Add"),_=Q("Editar");return p(),j(L,null,[r(G,null,{default:d(()=>[l("div",{class:R(["row q-py-lg q-pl-md",e.$q.screen.xs?"justify-center":"justify-between"])},[Ue,l("div",Ee,[e.validarPermisos("Agregar Proveedor")&&!e.$q.screen.xs?(p(),g(P,{key:0,color:"secondary","icon-right":"person_add",label:"Agregar Proveedor",class:"q-mr-md",onClick:o[0]||(o[0]=s=>e.modalAgregarProveedor=!e.modalAgregarProveedor)})):V("",!0)])],2),l("div",Se,[l("div",Ne,[l("div",Ie,[r(F,{class:"my-sticky-header-table",rows:e.rows,columns:e.columns,filter:e.filter,loading:e.loading,"row-key":"name"},{top:d(()=>[r(T),r(u,{dense:"",debounce:"300",color:"primary",modelValue:e.filter,"onUpdate:modelValue":o[1]||(o[1]=s=>e.filter=s)},{append:d(()=>[r(z,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-id":d(s=>[r(h,{props:s},{default:d(()=>[B(M(s.pageIndex+1),1)]),_:2},1032,["props"])]),"body-cell-estado":d(s=>[r(h,{props:s},{default:d(()=>[s.value?(p(),g(D,{key:0,outline:"",color:"positive",label:"Activo",class:"q-pa-sm"})):(p(),g(D,{key:1,outline:"",color:"red",label:"Inactivo",class:"q-pa-sm"}))]),_:2},1032,["props"])]),"body-cell-acciones":d(s=>[r(h,{props:s},{default:d(()=>[e.validarPermisos("Editar Proveedor")?(p(),g(P,{key:0,round:"",color:"primary",onClick:i=>e.editarProveedor(s.row),icon:"edit",class:"q-mr-sm",size:"11px"},null,8,["onClick"])):V("",!0),s.row.estado&&e.validarPermisos("Inactivar Proveedor")?(p(),g(P,{key:1,round:"",color:"deep-orange",icon:"close",onClick:i=>e.activarDesactivarProveedor(s.row.id,!1),size:"11px"},null,8,["onClick"])):V("",!0),!s.row.estado&&e.validarPermisos("Activar Proveedor")?(p(),g(P,{key:2,round:"",color:"positive",icon:"done",onClick:i=>e.activarDesactivarProveedor(s.row.id,!0),size:"11px"},null,8,["onClick"])):V("",!0)]),_:2},1032,["props"])]),"no-data":d(({icon:s,filter:i})=>[l("div",je,[r(z,{size:"2em",name:"sentiment_dissatisfied"}),Le,r(z,{size:"2em",name:i?"filter_b_and_w":s},null,8,["name"])])]),_:1},8,["rows","columns","filter","loading"])])])])]),_:1}),e.$q.screen.xs&&e.validarPermisos("Agregar Proveedor")?(p(),g(J,{key:0,position:"bottom-right",offset:[18,18]},{default:d(()=>[r(P,{round:"",color:"secondary",size:"lg",icon:"add",onClick:o[2]||(o[2]=s=>e.modalAgregarProveedor=!e.modalAgregarProveedor)})]),_:1})):V("",!0),r(k,{modelValue:e.modalAgregarProveedor,"onUpdate:modelValue":o[3]||(o[3]=s=>e.modalAgregarProveedor=s)},{default:d(()=>[r(a,{onActualizarLista:e.getProveedores},null,8,["onActualizarLista"])]),_:1},8,["modelValue"]),r(k,{modelValue:e.modalEditarProveedor,"onUpdate:modelValue":o[4]||(o[4]=s=>e.modalEditarProveedor=s)},{default:d(()=>[r(_,{proveedorData:e.proveedorData,onActualizarLista:e.getProveedores},null,8,["proveedorData","onActualizarLista"])]),_:1},8,["modelValue"])],64)}var Ze=A(De,[["render",Re]]);export{Ze as default};
